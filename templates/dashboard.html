{% extends "base.html" %}

{% block title %}Dashboard - Questionnaire Study{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h2>ğŸ“Š Your Dashboard</h2>
        <p>Welcome! Please complete the following questionnaires.</p>
    </div>

    <div class="questionnaires-grid">
        <!-- SWLS CARD -->
        <div class="questionnaire-card {% if completion_status.swls %}completed{% endif %}">
            <div class="card-icon">ğŸ˜Š</div>
            <h3>Satisfaction With Life Scale (SWLS)</h3>
            <p class="card-description">
                A brief assessment of your overall life satisfaction. 
                This questionnaire has 5 items and takes about 5 minutes to complete.
            </p>
            <div class="card-details">
                <span class="badge">5 Questions</span>
                <span class="badge">~5 minutes</span>
            </div>
            
            {% if completion_status.swls %}
                <div class="completion-banner">
                    âœ“ Completed
                </div>
                <p class="text-success">Thank you for completing this questionnaire!</p>
            {% else %}
                <a href="{{ url_for('swls') }}" class="btn btn-primary btn-block">
                    Start SWLS Questionnaire
                </a>
            {% endif %}
        </div>

        <!-- PHQ-9 CARD -->
        <div class="questionnaire-card {% if completion_status.phq9 %}completed{% endif %}">
            <div class="card-icon">ğŸ¥</div>
            <h3>Patient Health Questionnaire (PHQ-9)</h3>
            <p class="card-description">
                A brief assessment of your mood and well-being over the past 2 weeks.
                This questionnaire has 9 items and takes about 5-7 minutes to complete.
            </p>
            <div class="card-details">
                <span class="badge">9 Questions</span>
                <span class="badge">~7 minutes</span>
            </div>
            
            {% if completion_status.phq9 %}
                <div class="completion-banner">
                    âœ“ Completed
                </div>
                <p class="text-success">Thank you for completing this questionnaire!</p>
            {% else %}
                <a href="{{ url_for('phq9') }}" class="btn btn-primary btn-block">
                    Start PHQ-9 Questionnaire
                </a>
            {% endif %}
        </div>
    </div>

    <!-- PROGRESS SUMMARY -->
    <div class="progress-summary">
        <h3>Your Progress</h3>
        <div class="progress-bar-container">
            {% set progress = ((completion_status.swls|int + completion_status.phq9|int) / 2 * 100)|int %}
            <div class="progress-bar">
                <div class="progress-fill" style="width: {{ progress }}%">
                    {{ progress }}%
                </div>
            </div>
        </div>
        <p class="text-center text-muted">
            {% if completion_status.swls and completion_status.phq9 %}
                ğŸ‰ All questionnaires completed! Thank you for your participation.
            {% elif completion_status.swls or completion_status.phq9 %}
                You're halfway there! Please complete the remaining questionnaire.
            {% else %}
                Please complete both questionnaires at your convenience.
            {% endif %}
        </p>
    </div>

    <!-- INSTRUCTIONS -->
    <div class="instructions-box">
        <h4>ğŸ“Œ Important Instructions</h4>
        <ul>
            <li>Each question requires both a <strong>rating</strong> and a <strong>text explanation</strong>.</li>
            <li>Please answer honestly - there are no right or wrong answers.</li>
            <li>You can complete the questionnaires in any order.</li>
            <li>Once completed, you cannot retake a questionnaire.</li>
            <li>All your responses are confidential and anonymous.</li>
        </ul>
    </div>
</div>
{% endblock %}
